<ion-card>
  <ion-card-header>
    <ion-card-title>Histórico de Empréstimos</ion-card-title>
  </ion-card-header>
  <ion-card-content>
    <div>
      <div *ngFor="let loan of loans; let last = last" class="loan-card" style="margin-bottom: 16px;">
        <div style="font-weight: bold;">{{ loan.book.titulo }}</div>
        <div style="color: #666;">{{ loan.book.autor }}</div>
        <div style="margin: 8px 0;">
          <ion-icon name="calendar-outline" style="color: #1976d2; font-size: 1em;"></ion-icon>
          Emprestado: {{ loan.dataEmprestimo | date:'dd/MM/yyyy' }}
          <br>
          <ion-icon name="calendar-outline" style="color: #1976d2; font-size: 1em;"></ion-icon>
          Devolvido: {{ loan.dataDevolucaoReal | date:'dd/MM/yyyy' }}
        </div>
        <div *ngIf="loan.multaCalculada > 0">
          <span style="background: #e53935; color: #fff; border-radius: 8px; padding: 2px 10px; font-size: 0.95em;">
            Multa: R${{ loan.multaCalculada }},00
          </span>
          <span style="color: #4caf50; margin-left: 8px;">
            {{ loan.multaPaga ? 'Pago' : 'Pendente' }}
          </span>
        </div>
        <div style="margin-top: 8px;">
          <ion-button 
            (click)="reemprestarLivro(loan)" 
            size="small" 
            color="primary" 
            fill="solid"
            [disabled]="loan.book.quantidade === 0">
            {{ loan.book.quantidade > 0 ? 'Emprestar Novamente' : 'Indisponível' }}
          </ion-button>
        </div>
        <div *ngIf="!last" style="height: 12px;"></div>
      </div>
    </div>
  </ion-card-content>
</ion-card>
